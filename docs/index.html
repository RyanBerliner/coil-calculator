<html lang="en">
  <head>
    <title>MTB Coil Calculator</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <link rel="preload" href="form.js" as="script" />
    <link rel="preload" href="curve.js" as="script" />
    <link rel="preload" href="dom.js" as="script" />
  </head>
  <body>
    <aside>
      <canvas id="animation"></canvas>
      <button id="simulate">
        <span>Calculated Sag</span>
        <span><span id="sag-output"></span>%</span>
      </button>
    </aside>
    <form>
      <fieldset>
        <div>
          <legend>Rider Information</legend>
          <hr aria-hidden="true" />
        </div>

        <label>
          Rider Weight (lbs)
          <input type="number" name="rider-weight" value="165" min="0">
        </label>
        <label>
          Rear Wheel Bias (default 60%)
          <input type="number" name="rear-bias" value="60" min="0" max="100">
        </label>
      </fieldset>

      <fieldset>
        <div>
          <legend>Bike Specs</legend>
          <hr aria-hidden="true" />
          <div class="search">
            <input type="search" placeholder="Search for a bike..." /> 
            <div id="search-results" style="display: none;">
            </div>
          </div>
        </div>


        <label>
          Rear wheel travel (mm)
          <input type="number" name="travel" value="160" min="0">
        </label>
        <label>
          Shock stroke (mm)
          <input type="number" name="stroke" value="60" min="0">
        </label>
        <label>
          Spring Weight (lbs/in)
          <input type="number" name="spring-weight" value="400" min="0">
        </label>
        <div style="display:none;" id="leverage-points">
          <input type="hidden" value="1" />
          <input type="hidden" value="1" />
          <input type="hidden" value="1" />
          <input type="hidden" value="1" />
          <input type="hidden" value="1" />
          <input type="hidden" value="1" />
        </div>
        <div class="curve-heading">
          <h2 id="curve-heading">Leverage Curve</h2>
          <select aria-labelledby="curve-heading">
            <option value="mp">Most Progressive</option>
            <option value="p" selected>Progressive</option>
            <option value="flat">Flat</option>
            <option value="d">Digressive</option>
            <option value="md">Most Digressive</option>
            <option value="c">Custom</option>
          </select>
        </div>
        <div class="curve-container">
          <span id="upper-leverage">1.5</span>
          <span id="base-leverage">1</span>
          <span id="lower-leverage">0.5</span>
          <span class="x-axis">Wheel Travel</span>
          <canvas id="curve"></canvas>
        </div>
      </fieldset>
    </form>
    <footer style="text-align:center;padding: 20px;">
      Learn <a href="https://ryanberliner.com/best-mtb-coil-calculator">about this tool</a>, or
      view code and license on <a href="https://github.com/RyanBerliner/coil-calculator">GitHub</a>
    </footer>
    <script>
      const bikesData = {"bikes": [{"make": "Transition", "model": "Patrol", "year_start": 2021, "year_end": 2026, "size_start": "SM", "size_end": "MD", "wheel_travel": 160, "stroke": 60.0, "curve": [1.1520467887599806, 1.0874984186863494, 1.0262891258804205, 0.9730638183449484, 0.9260645230923175, 0.8819734212147433]}, {"make": "Transition", "model": "Patrol", "year_start": 2021, "year_end": 2026, "size_start": "LG", "size_end": "XL", "wheel_travel": 160, "stroke": 60.0, "curve": [1.1550383387653893, 1.0857256758030416, 1.0249975326835568, 0.9721754705644511, 0.9255068005662133, 0.8870497088587596]}, {"make": "Transition", "model": "Sentinel", "year_start": 2026, "year_end": 2026, "size_start": "XS", "size_end": "XXL", "wheel_travel": 150, "stroke": 60.0, "curve": [1.1692561759748636, 1.0885448022223685, 1.0241403269078075, 0.9703601221334065, 0.9229205894963056, 0.8836254105765216]}, {"make": "Transition", "model": "Spire", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "LG", "wheel_travel": 170, "stroke": 65.0, "curve": [1.1566851167689922, 1.083768735170531, 1.0195912097729567, 0.9695284903346959, 0.9285340677604458, 0.895975650746806]}, {"make": "Transition", "model": "Spire", "year_start": 2026, "year_end": 2026, "size_start": "XL", "size_end": "XXL", "wheel_travel": 170, "stroke": 65.0, "curve": [1.1604253492988807, 1.082463341471724, 1.01843575907665, 0.965864697926856, 0.9275756852169106, 0.905532818854637]}, {"make": "Transition", "model": "Smuggler", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XXL", "wheel_travel": 130, "stroke": 50.0, "curve": [1.213702642753769, 1.1137888265324976, 1.0259178737098436, 0.9589363658850872, 0.9075949973998368, 0.8702019827341309]}, {"make": "Transition", "model": "Spur", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XL", "wheel_travel": 120, "stroke": 45.0, "curve": [1.2297839160730886, 1.1117025398598788, 1.019599410932144, 0.9523943420170956, 0.9076158297415104, 0.8844819466205978]}, {"make": "Transition", "model": "Spur", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XL", "wheel_travel": 100, "stroke": 37.5, "curve": [1.2335792931932115, 1.1178501007654276, 1.0188440661295037, 0.9498280071092262, 0.9061075225631663, 0.8830334973157961]}, {"make": "Transition", "model": "Scout", "year_start": 2026, "year_end": 2026, "size_start": "XS", "size_end": "MD", "wheel_travel": 150, "stroke": 57.5, "curve": [1.218191831487662, 1.114267778961346, 1.0291235524535916, 0.9617365448672075, 0.9067838667526901, 0.8592900227378106]}, {"make": "Transition", "model": "TR11", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XL", "wheel_travel": 200, "stroke": 75.0, "curve": [1.105388994175806, 1.1339224557318306, 1.1047541949276336, 1.0167399754046116, 0.895398737657772, 0.744874320003445]}, {"make": "Yeti", "model": "SB165", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XL", "wheel_travel": 165, "stroke": 65.0, "curve": [1.0609447361883515, 1.043305316381935, 1.0306457945489365, 1.0192265306824961, 0.9806689567581399, 0.8266399743238622]}, {"make": "Yeti", "model": "SB160", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XXL", "wheel_travel": 160, "stroke": 65.0, "curve": [1.05735899848374, 1.0376482534267975, 1.019540942971408, 1.002800435363931, 0.9733136403433639, 0.8935671228577378]}, {"make": "Yeti", "model": "SB140", "year_start": 2026, "year_end": 2026, "size_start": "SM", "size_end": "XXL", "wheel_travel": 140, "stroke": 55.0, "curve": [1.0579649081093363, 1.0382232921987824, 1.0201042735957675, 1.0000275123549707, 0.9671865299883778, 0.9072630687399782]}, {"make": "Yeti", "model": "SB135", "year_start": 2026, "year_end": 2026, "size_start": "XS", "size_end": "XL", "wheel_travel": 135, "stroke": 55.0, "curve": [1.0605302038156463, 1.040186569655336, 1.0207859710083467, 0.9989811626893341, 0.9704493332240833, 0.8968414551593867]}, {"make": "Yeti", "model": "SB120", "year_start": 2026, "year_end": 2026, "size_start": "XS", "size_end": "XXL", "wheel_travel": 120, "stroke": 45.0, "curve": [1.0514147248319008, 1.031418233152065, 1.0123213115903835, 0.9908910537774188, 0.9697213310249171, 0.948728878570881]}], "terms": {"transition": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], "patrol": [0, 1], "2021": [0, 1], "2026": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14], "sm": [0, 3, 5, 6, 7, 9, 10, 11, 12], "md": [0, 8], "lg": [1, 3], "xl": [1, 4, 6, 7, 9, 10, 13], "sentinel": [2], "xs": [2, 8, 13, 14], "xxl": [2, 4, 5, 11, 12, 14], "spire": [3, 4], "smuggler": [5], "spur": [6, 7], "scout": [8], "tr11": [9], "yeti": [10, 11, 12, 13, 14], "sb165": [10], "sb160": [11], "sb140": [12], "sb135": [13], "sb120": [14]}, "terms_trie": {"object_ids": [], "children": {"t": {"object_ids": [], "children": {"r": {"object_ids": [], "children": {"a": {"object_ids": [], "children": {"n": {"object_ids": [], "children": {"s": {"object_ids": [], "children": {"i": {"object_ids": [], "children": {"t": {"object_ids": [], "children": {"i": {"object_ids": [], "children": {"o": {"object_ids": [], "children": {"n": {"object_ids": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], "children": {}}}}}}}}}}}}}}}}, "1": {"object_ids": [], "children": {"1": {"object_ids": [9], "children": {}}}}}}}}, "p": {"object_ids": [], "children": {"a": {"object_ids": [], "children": {"t": {"object_ids": [], "children": {"r": {"object_ids": [], "children": {"o": {"object_ids": [], "children": {"l": {"object_ids": [0, 1], "children": {}}}}}}}}}}}}, "2": {"object_ids": [], "children": {"0": {"object_ids": [], "children": {"2": {"object_ids": [], "children": {"1": {"object_ids": [0, 1], "children": {}}, "6": {"object_ids": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14], "children": {}}}}}}}}, "s": {"object_ids": [], "children": {"m": {"object_ids": [0, 3, 5, 6, 7, 9, 10, 11, 12], "children": {"u": {"object_ids": [], "children": {"g": {"object_ids": [], "children": {"g": {"object_ids": [], "children": {"l": {"object_ids": [], "children": {"e": {"object_ids": [], "children": {"r": {"object_ids": [5], "children": {}}}}}}}}}}}}}}, "e": {"object_ids": [], "children": {"n": {"object_ids": [], "children": {"t": {"object_ids": [], "children": {"i": {"object_ids": [], "children": {"n": {"object_ids": [], "children": {"e": {"object_ids": [], "children": {"l": {"object_ids": [2], "children": {}}}}}}}}}}}}}}, "p": {"object_ids": [], "children": {"i": {"object_ids": [], "children": {"r": {"object_ids": [], "children": {"e": {"object_ids": [3, 4], "children": {}}}}}}, "u": {"object_ids": [], "children": {"r": {"object_ids": [6, 7], "children": {}}}}}}, "c": {"object_ids": [], "children": {"o": {"object_ids": [], "children": {"u": {"object_ids": [], "children": {"t": {"object_ids": [8], "children": {}}}}}}}}, "b": {"object_ids": [], "children": {"1": {"object_ids": [], "children": {"6": {"object_ids": [], "children": {"5": {"object_ids": [10], "children": {}}, "0": {"object_ids": [11], "children": {}}}}, "4": {"object_ids": [], "children": {"0": {"object_ids": [12], "children": {}}}}, "3": {"object_ids": [], "children": {"5": {"object_ids": [13], "children": {}}}}, "2": {"object_ids": [], "children": {"0": {"object_ids": [14], "children": {}}}}}}}}}}, "m": {"object_ids": [], "children": {"d": {"object_ids": [0, 8], "children": {}}}}, "l": {"object_ids": [], "children": {"g": {"object_ids": [1, 3], "children": {}}}}, "x": {"object_ids": [], "children": {"l": {"object_ids": [1, 4, 6, 7, 9, 10, 13], "children": {}}, "s": {"object_ids": [2, 8, 13, 14], "children": {}}, "x": {"object_ids": [], "children": {"l": {"object_ids": [2, 4, 5, 11, 12, 14], "children": {}}}}}}, "y": {"object_ids": [], "children": {"e": {"object_ids": [], "children": {"t": {"object_ids": [], "children": {"i": {"object_ids": [10, 11, 12, 13, 14], "children": {}}}}}}}}}}};
    </script>
    <script src="form.js" defer></script>
    <script src="curve.js" defer></script>
    <script src="dom.js" defer></script>
  </body>
</html>
